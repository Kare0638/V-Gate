apiVersion: v1
kind: ConfigMap
metadata:
  name: vgate-config
  labels:
    app.kubernetes.io/name: vgate
    app.kubernetes.io/component: config
data:
  config.yaml: |
    version: "0.3.2"

    # Server settings
    server:
      host: "0.0.0.0"
      port: 8000

    # Model configuration
    model:
      model_id: "Qwen/Qwen2.5-1.5B-Instruct-AWQ"
      quantization: "awq"
      gpu_memory_utilization: 0.7
      max_model_len: 2048
      trust_remote_code: true
      enforce_eager: true

    # Request batching
    batch:
      max_batch_size: 8
      max_wait_time_ms: 50.0

    # Result cache
    cache:
      enabled: true
      maxsize: 1000

    # Default inference parameters
    inference:
      temperature: 0.7
      top_p: 0.9
      max_tokens: 256

    # Logging configuration
    logging:
      level: "INFO"
      json_format: true

    # Prometheus metrics
    metrics:
      enabled: true

    # Security & Access Control
    security:
      enabled: true
      api_keys:
        - key: "PLACEHOLDER_REPLACE_WITH_REAL_KEY"
          name: "default"
          rate_limit: 100
      rate_limiting:
        enabled: true
        default_limit: 60
        window_seconds: 60
      exempt_paths:
        - "/health"
        - "/metrics"
